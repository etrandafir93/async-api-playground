server:
  port: 8082

spring:
  application:
    name: inventory-service
  cloud:
    stream:
      function:
        cloud-events:
          enabled: false
      kafka:
        binder:
          brokers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
          configuration:
            schema.registry.url: mock://test-registry
          consumer-properties:
            key.deserializer: org.apache.kafka.common.serialization.StringDeserializer
            value.deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer
            specific.avro.reader: true
            schema.registry.url: mock://test-registry
        bindings:
          orderCreated-in-0:
            consumer:
              configuration:
                key.deserializer: org.apache.kafka.common.serialization.StringDeserializer
                value.deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer
                specific.avro.reader: true
                schema.registry.url: mock://test-registry
          stockUnavailable-out-0:
            producer:
              configuration:
                key.serializer: org.apache.kafka.common.serialization.StringSerializer
                value.serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
                specific.avro.reader: true
          stockUpdated-out-0:
            producer:
              configuration:
                key.serializer: org.apache.kafka.common.serialization.StringSerializer
                value.serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
                specific.avro.reader: true
      bindings:
        orderCreated-in-0:
          destination: order-created
          group: inventory-service-group
          consumer:
            useNativeDecoding: true
        stockUnavailable-out-0:
          destination: stock-unavailable
          content-type: application/*+avro
        stockUpdated-out-0:
          destination: stock-unavailable
          content-type: application/*+avro
    function:
      definition: orderCreated

  kafka:
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
      properties:
        schema.registry.url: mock://test-registry
    consumer:
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer
      properties:
        specific.avro.reader: true
        schema.registry.url: mock://test-registry


springwolf:
  enabled: true
  docket:
    info:
      title: Inventory Service API
      version: 1.0.0
      description: Inventory Service - Async API documentation for Kafka topics
    base-package: com.etrandafir.asyncapi.inventoryservice
    servers:
      kafka-server:
        protocol: kafka
        host: localhost:9092
  use-fqn: true
  scanner:
    async-listener:
      enabled: true
    async-publisher:
      enabled: true
  plugin:
    kafka:
      publishing:
        enabled: true
        producer:
          bootstrap-servers: localhost:9092
          key-serializer: org.apache.kafka.common.serialization.StringSerializer
          value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
          properties:
            "[schema.registry.url]": http://localhost:8083

logging:
  level:
    com.etrandafir.asyncapi.inventoryservice: DEBUG
